"use strict";(self.webpackChunklyrics_finder_frontend=self.webpackChunklyrics_finder_frontend||[]).push([[786],{8786:function(e,t,n){n.r(t),n.d(t,{default:function(){return ce}});var s=n(1413),r=n(885),i=n(2791),a=n(1157),l=n(703),o=n(8530),c=n(890),d=n(9727),x=n(7924),u=n(5403),h=n(242),Z=n(4512),p=n(5825),f=n(5646),m=n(9658),j=n(6151),y=n(6871),g=n(7394),v=n(2477),b=n(184);var k=function(){var e=(0,y.s0)(),t=(0,y.ur)();return(0,b.jsx)(v.Z,{title:"Go to home page",placement:"right",children:(0,b.jsx)(j.Z,{startIcon:(0,b.jsx)(g.Z,{}),onClick:function(n){n.preventDefault(),e("PUSH"==t?-1:"/")},sx:function(e){return{backgroundImage:"linear-gradient(120deg, ".concat(e.palette.primary.light,", ").concat(e.palette.secondary.dark,")")}},variant:"contained",children:"Home"})})},w="https://lyrics-finder-02nb.onrender.com/",C=n(3967),S=n(5914),R=n(3466),L=n(3973),P=n(3239);var E=function(e){var t=e.playlistURL,n=e.setPlaylistURL,l=e.showSnackbar,c=e.setCompletePlaylistDetails,d=i.useState(!1),x=(0,r.Z)(d,2),h=x[0],Z=x[1];i.useEffect((function(){return function(){Z(!1)}}),[]);var p=(0,C.Z)(),f=(0,s.Z)({},!h&&{backgroundImage:"linear-gradient(120deg, ".concat(p.palette.success.light,", ").concat(p.palette.success.dark,")")});function m(e){e.preventDefault(),Z(!0);var n={url:"".concat(t)},s=(0,a.C$)(n),r="".concat(w).concat("/lyrics-finder-api/load-complete-playlist/","?").concat(s);fetch(r,{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(e){200===e.status?(c(e),l({message:e.message,severity:"success"})):l({message:e.message,severity:"error"})})).catch((function(e){l({message:"Failed to connect to server",severity:"error"})})).finally((function(){Z(!1)}))}return(0,b.jsxs)(o.Z,{children:[(0,b.jsx)(S.Z,{value:t,onChange:function(e){return n(e.target.value)},placeholder:"Enter a spotify playlist URL",fullWidth:!0,sx:{my:2,"& .MuiOutlinedInput-root":{borderRadius:8,paddingLeft:2}},InputProps:{startAdornment:(0,b.jsx)(R.Z,{position:"start",children:(0,b.jsx)(u.Z,{})})},onKeyDown:(0,a.gT)((function(e){m(e)}))}),(0,b.jsxs)(o.Z,{sx:{position:"relative"},children:[(0,b.jsx)(j.Z,{variant:"contained",color:"success",sx:f,fullWidth:!0,startIcon:(0,b.jsx)(L.Z,{}),onClick:m,disabled:h,children:"Load playlist"}),h&&(0,b.jsx)(P.Z,{color:"secondary",size:24,sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]})]})},I=n(2982),U=n(493),D=n(5021),F=n(653),T=n(6259),_=n(3044),A=n(5519),W=n(9875),G=n(9818),z=n(3400),N=n(3028),B=n(9823),H=n(3512),O=n(7047),q=n(43),K=n(5332);var M=function(e){var t=e.songName,n=e.artists,s=(0,i.useState)(!1),a=(0,r.Z)(s,2),l=a[0],d=a[1],u=(0,i.useState)(!1),h=(0,r.Z)(u,2),Z=h[0],p=h[1],f=(0,i.useState)(void 0),m=(0,r.Z)(f,2),y=m[0],g=m[1],v=(0,i.useState)(void 0),k=(0,r.Z)(v,2),C=k[0],S=k[1];(0,i.useEffect)((function(){if(!Z&&l){var e={songname:t,artists:n},s=(0,K.Z)(e),r="".concat(w).concat("/lyrics-finder-api/get-lyrics/","?").concat(s);fetch(r,{mode:"cors",method:"GET"}).then((function(e){return e.json()})).then((function(e){var t,n;200===e.status&&"undefined"!==typeof e.data?(g(null===(t=e.data)||void 0===t?void 0:t.lyrics),S(null===(n=e.data)||void 0===n?void 0:n.geniusURL)):g("Error: Unable to load lyrics.")})).catch((function(e){g("Error: An unexpected error occured.")})).finally((function(){p(!0)}))}}),[l]);var R=function(){d(!1)};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Z,{children:(0,b.jsx)(j.Z,{startIcon:(0,b.jsx)(H.Z,{}),sx:{backgroundColor:"#767676",":hover":{backgroundColor:"#515151"}},color:"primary",variant:"contained",onClick:function(){d(!0)},children:"View lyrics"})}),(0,b.jsx)(G.Z,{open:l,onClose:R,fullWidth:!0,maxWidth:"lg",children:(0,b.jsxs)(o.Z,{sx:{p:3},children:[(0,b.jsxs)(o.Z,{display:"flex",flexDirection:"row",alignItems:"center",children:[(0,b.jsx)(N.Z,{}),(0,b.jsx)(c.Z,{variant:"h4",sx:{ml:1},children:"Lyrics"}),(0,b.jsx)(o.Z,{flexGrow:1}),(0,b.jsx)(z.Z,{onClick:R,children:(0,b.jsx)(B.Z,{})})]}),Boolean(C)&&(0,b.jsxs)(c.Z,{variant:"caption",color:"textSecondary",children:["Source: ",(0,b.jsx)(q.Z,{href:C,target:"_blank",children:"Genius.com"})]}),(0,b.jsx)(x.Z,{sx:{mt:1,mb:2}}),(0,b.jsxs)(c.Z,{variant:"h5",textAlign:"center",sx:{my:1},children:[t," - ",n]}),!Z&&[1,2,3].map((function(e,t){return(0,b.jsxs)(o.Z,{children:[(0,b.jsx)(O.Z,{animation:"wave",height:26,width:150}),(0,b.jsx)(O.Z,{animation:"wave",height:26,width:350}),(0,b.jsx)(O.Z,{animation:"wave",height:26,width:400}),(0,b.jsx)(O.Z,{animation:"wave",height:26,width:350}),(0,b.jsx)(O.Z,{animation:"wave",height:26,width:400}),(0,b.jsx)("br",{})]},t)})),Z&&(0,b.jsx)(o.Z,{sx:{backgroundColor:"#E3E3E3",p:1},children:"string"===typeof y&&y.split("\n").map((function(e,t){return""===e?(0,b.jsx)("br",{},t):(0,b.jsx)(c.Z,{children:e},t)}))}),(0,b.jsx)(x.Z,{sx:{my:1}}),(0,b.jsx)(j.Z,{color:"primary",onClick:R,children:"Close"})]})})]})};var V=function(e){var t=e.items;return(0,b.jsx)(o.Z,{my:1,children:(0,b.jsx)(U.Z,{sx:{width:"100%",border:"1px solid ".concat(A.Z[300]),py:1},disablePadding:!0,children:t.map((function(e,n){return(0,b.jsxs)(D.ZP,{alignItems:"flex-start",sx:{py:0},children:[(0,b.jsx)(F.Z,{children:(0,b.jsx)(_.Z,{alt:"Song cover photo",src:e.imageURL,variant:"square"})}),(0,b.jsx)(T.Z,{children:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.Z,{children:e.name}),(0,b.jsx)(c.Z,{variant:"body2",color:"textSecondary",children:e.artists}),(0,b.jsx)(o.Z,{my:1,children:(0,b.jsx)(j.Z,{startIcon:(0,b.jsx)(W.Z,{className:"fab fa-spotify"}),sx:{backgroundColor:"#1db954",":hover":{backgroundColor:"#13823A"}},variant:"contained",href:e.url,target:"_blank",children:"Listen on Spotify"})}),(0,b.jsx)(M,{songName:e.name,artists:e.artists}),n!==t.length-1&&(0,b.jsx)(x.Z,{sx:{mt:2}})]})})]},n)}))})})},$=n(4942),J=n(8917),Q=n(986);var X=function(e){var t,n=e.value,s=(0,C.Z)(),r=(t={height:10,borderRadius:5},(0,$.Z)(t,"&.".concat(J.Z.colorPrimary),{backgroundColor:s.palette.grey["light"===s.palette.mode?300:800]}),(0,$.Z)(t,"& .".concat(J.Z.bar),{borderRadius:5,backgroundColor:"light"===s.palette.mode?"#1a90ff":"#308fe8"}),t);return(0,b.jsx)(o.Z,{my:1,children:n?(0,b.jsx)(Q.Z,{sx:r,variant:"determinate",value:n}):(0,b.jsx)(Q.Z,{sx:r,variant:"indeterminate"})})};var Y=function(e){var t=e.searchPlaylist;return(0,b.jsx)(S.Z,{placeholder:"Search lyrics",fullWidth:!0,sx:{my:2,"& .MuiOutlinedInput-root":{borderRadius:8,paddingLeft:2}},InputProps:{startAdornment:(0,b.jsx)(R.Z,{position:"start",children:(0,b.jsx)(u.Z,{})})},id:"search-keywords-TextField",onKeyDown:(0,a.gT)((function(e){t(e)}))})};var ee=function(e){e.playlistURL;var t,n,l,c=e.showSnackbar,d=e.setSearchResults,x=e.completePlaylistResponse,h=i.useState([]),Z=(0,r.Z)(h,2),p=Z[0],f=Z[1],m=i.useState(!1),y=(0,r.Z)(m,2),g=y[0],v=y[1];i.useEffect((function(){return function(){v(!1)}}),[]);var k=i.useState(0),S=(0,r.Z)(k,2),R=S[0],L=S[1],E=null===(t=x.data)||void 0===t?void 0:t.items.length;function U(e){var t;e.stopPropagation();var n=document.getElementById("search-keywords-TextField").value;""!==n?(v(!0),c({message:"Scanning playlist. This may take a while...",severity:"info"}),null===(t=x.data)||void 0===t||t.items.forEach((function(e){var t={songname:e.name,artists:e.artists,keywords:n},r=(0,a.C$)(t),i="".concat(w).concat("/lyrics-finder-api/scan-song/","?").concat(r);fetch(i,{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(t){if(200===t.status&&"undefined"!==typeof t.data){var n=(0,s.Z)((0,s.Z)({},t.data),{},{imageURL:e.imageURL,url:e.url,previewURL:"javascript:void(0);"});f((function(e){return[].concat((0,I.Z)(e),[n])}))}})).catch((function(e){c({severity:"error",message:"An unknown error occured while scanning ".concat(t.songname," - ").concat(t.artists)})})).finally((function(){L((function(e){return e+1}))}))}))):c({message:"Please enter a valid keyword",severity:"info"})}i.useEffect((function(){R===E&&(v(!1),p.length>0?(c({message:"Found matches.",severity:"success"}),d({status:200,message:"Completed search.",data:p})):c({message:"No matches found.",severity:"error"}))}),[R]);var D=(0,C.Z)(),F=(0,s.Z)({},!g&&{backgroundImage:"linear-gradient(120deg, ".concat(D.palette.info.light,", ").concat(D.palette.info.dark,")")});return(0,b.jsxs)(o.Z,{children:[g&&(0,b.jsx)(X,{value:R/E*100}),(0,b.jsx)(o.Z,{my:2,children:(0,b.jsx)(Y,{searchPlaylist:U})}),(0,b.jsx)(o.Z,{children:(null===(n=x.data)||void 0===n?void 0:n.items)&&(0,b.jsx)(V,{items:null===(l=x.data)||void 0===l?void 0:l.items})}),(0,b.jsxs)(o.Z,{sx:{position:"relative"},children:[(0,b.jsx)(j.Z,{variant:"contained",color:"primary",sx:F,fullWidth:!0,startIcon:(0,b.jsx)(u.Z,{}),onClick:U,disabled:g,children:"Search playlist"}),g&&(0,b.jsx)(P.Z,{color:"secondary",size:24,sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]})]})},te=n(1889),ne=n(501);var se=function(e){var t,n,s,r,i,a,l,d,x,u,h=e.completePlaylistDetails;"undefined"!==typeof(null===(t=h.data)||void 0===t?void 0:t.playlist)?(n=h.data.playlist.images[0].url,s=h.data.playlist.external_urls.spotify,r=h.data.playlist.name,i=h.data.playlist.description,a=h.data.playlist.owner.name,l=h.data.playlist.owner.url,d=h.data.playlist.followers.total,x=h.data.playlist.tracks.total,0===(u=h.data.playlist.owner.images).length&&(u=[{url:""}])):(n="",s="",r="",i="",a="",l="",d=0,x=0,u=[{url:""}]);var Z={color:"#fff",textDecorationColor:"#fff",textDecoration:"none",":hover":{textDecoration:"underline"}};return(0,b.jsx)(o.Z,{children:(0,b.jsxs)(te.ZP,{container:!0,sx:{backgroundImage:"linear-gradient(120deg, #1D92B9, #191414)",py:2},children:[(0,b.jsx)(te.ZP,{item:!0,xs:12,md:4,children:(0,b.jsx)(o.Z,{display:"flex",justifyContent:"center",children:(0,b.jsx)("img",{alt:"[Playlist Image]",src:n,style:{maxWidth:"100%",width:"200px",height:"200px"}})})}),(0,b.jsx)(te.ZP,{item:!0,xs:12,md:8,children:(0,b.jsxs)(o.Z,{sx:{height:"100%",width:"100%",color:"#fff"},p:2,children:[(0,b.jsx)(q.Z,{href:s,target:"_blank",sx:Z,children:(0,b.jsx)(c.Z,{variant:"h4",children:r})}),(0,b.jsx)(c.Z,{color:A.Z[400],children:i}),(0,b.jsxs)(o.Z,{display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"wrap",my:1,children:[(0,b.jsx)(_.Z,{sx:{backgroundColor:A.Z[700],height:28,width:28},src:u[0].url,children:(0,b.jsx)(ne.Z,{fontSize:"small"})}),(0,b.jsx)(c.Z,{sx:{mx:1},children:(0,b.jsx)(q.Z,{href:l,target:"_blank",sx:Z,children:a})}),d>0&&(0,b.jsxs)(b.Fragment,{children:["\u2022 ",(0,b.jsxs)(c.Z,{sx:{mx:1},children:[d," likes"]})]}),"\u2022 ",(0,b.jsxs)(c.Z,{sx:{mx:1},children:[x," songs"]})]})]})})]})})};var re=function(e,t,n){t instanceof RegExp||(t=new RegExp(t,"g"));for(var s=e.split(t),r=e.match(t),i=[],a=0,l=0;l<s.length;l++)0!==l&&l<s.length&&null!==r&&(a in r&&(i[i.length]=n(r[a])),a+1 in r&&a++),i[i.length]=s[l];return i};var ie=function(e){var t=e.keyword,n=e.snippet,s=re(n,"\n",(function(){return(0,b.jsx)("br",{})})),r=[];for(var a in s)if("string"===typeof s[a]){var l=re(s[a],new RegExp(t,"gi"),(function(e){return(0,b.jsx)("span",{style:{textDecoration:"underline"},children:e})}));r=r.concat(l)}else r[r.length]=s[a];return(0,b.jsxs)(c.Z,{color:"textSecondary",sx:{fontStyle:"italic"},fontSize:14,children:['"',r.map((function(e,t){return(0,b.jsx)(i.Fragment,{children:e},t)})),'"']})},ae=n(7);function le(e){var t=e.name,n=e.artists,s=e.lyrics,a=e.snippets,d=e.url,u=(e.previewURL,e.geniusURL),h=e.isLast,Z=i.useState(!1),p=(0,r.Z)(Z,2),f=p[0],m=p[1],y=function(){m(!1)},g=s.split("\n"),v={my:1,py:1,px:2,display:"inline-block",borderLeft:"4px solid ".concat(ae.Z.A700)};return(0,b.jsxs)(i.Fragment,{children:[(0,b.jsx)(c.Z,{children:t}),(0,b.jsx)(c.Z,{variant:"body2",color:"textSecondary",children:n}),(0,b.jsx)(l.Z,{sx:v,children:a.map((function(e,t){return(0,b.jsx)(ie,{keyword:e.keyword,snippet:e.snippet},t)}))}),(0,b.jsx)(o.Z,{sx:{mb:1},children:(0,b.jsx)(j.Z,{startIcon:(0,b.jsx)(W.Z,{className:"fab fa-spotify"}),sx:{backgroundColor:"#1db954",":hover":{backgroundColor:"#13823A"}},variant:"contained",href:d,target:"_blank",children:"Listen on spotify"})}),(0,b.jsx)(o.Z,{children:(0,b.jsx)(j.Z,{startIcon:(0,b.jsx)(H.Z,{}),sx:{backgroundColor:"#767676",":hover":{backgroundColor:"#515151"}},color:"primary",variant:"contained",onClick:function(){m(!0)},children:"View lyrics"})}),!h&&(0,b.jsx)(x.Z,{sx:{mt:1}}),(0,b.jsx)(G.Z,{open:f,onClose:y,fullWidth:!0,maxWidth:"lg",children:(0,b.jsxs)(o.Z,{sx:{p:3},children:[(0,b.jsxs)(o.Z,{display:"flex",flexDirection:"row",alignItems:"center",children:[(0,b.jsx)(N.Z,{}),(0,b.jsx)(c.Z,{variant:"h4",sx:{ml:1},children:"Lyrics"}),(0,b.jsx)(o.Z,{flexGrow:1}),(0,b.jsx)(z.Z,{onClick:y,children:(0,b.jsx)(B.Z,{})})]}),(0,b.jsxs)(c.Z,{variant:"caption",color:"textSecondary",children:["Source: ",(0,b.jsx)(q.Z,{href:u,target:"_blank",children:"Genius.com"})]}),(0,b.jsx)(x.Z,{sx:{mt:1,mb:2}}),(0,b.jsxs)(c.Z,{variant:"h5",textAlign:"center",sx:{my:1},children:[t," - ",n]}),(0,b.jsx)(o.Z,{sx:{backgroundColor:"#E3E3E3",p:1},children:g.map((function(e,t){return""===e?(0,b.jsx)("br",{},t):(0,b.jsx)(c.Z,{children:e},t)}))}),(0,b.jsx)(x.Z,{sx:{my:1}}),(0,b.jsx)(j.Z,{color:"primary",onClick:y,children:"Close"})]})})]})}var oe=function(e){var t,n=e.searchResults;return(0,b.jsx)(o.Z,{children:(0,b.jsx)(U.Z,{sx:{width:"100%",my:1,border:"1px solid ".concat(A.Z[300]),py:1},disablePadding:!0,children:null===(t=n.data)||void 0===t?void 0:t.map((function(e,t){var s;return(0,b.jsxs)(D.ZP,{alignItems:"flex-start",sx:{py:0},children:[(0,b.jsx)(F.Z,{children:(0,b.jsx)(_.Z,{alt:"Album cover",src:e.imageURL,variant:"square"})}),(0,b.jsx)(T.Z,{disableTypography:!0,children:(0,b.jsx)(le,{name:e.name,artists:e.artists,lyrics:e.lyrics,snippets:e.snippets,url:e.url,previewURL:e.previewURL,geniusURL:e.geniusURL,isLast:(null===(s=n.data)||void 0===s?void 0:s.length)-1===t})})]},t)}))})})};var ce=function(){var e=(0,i.useState)({open:!1,severity:void 0,message:""}),t=(0,r.Z)(e,2),n=t[0],y=t[1],g=function(e){y((0,s.Z)((0,s.Z)((0,s.Z)({},n),{},{severity:"success"},e),{},{open:!0}))},v=function(){y((0,s.Z)((0,s.Z)({},n),{},{open:!1,message:""}))},w=(0,i.useState)(""),C=(0,r.Z)(w,2),S=C[0],R=C[1],L=(0,i.useState)({}),P=(0,r.Z)(L,2),I=P[0],U=P[1],D=(0,i.useState)({}),F=(0,r.Z)(D,2),T=F[0],_=F[1];(0,i.useEffect)((function(){"data"in I&&(z(1),O((0,s.Z)((0,s.Z)({},H),{},{loadCompletePlaylist:!0})))}),[I]),(0,i.useEffect)((function(){"data"in T&&(z(2),O((0,s.Z)((0,s.Z)({},H),{},{searchResults:!0})))}),[T]);var A=(0,i.useState)(0),W=(0,r.Z)(A,2),G=W[0],z=W[1],N=(0,i.useState)({loadCompletePlaylist:!1,searchResults:!1}),B=(0,r.Z)(N,2),H=B[0],O=B[1],q=function(e){return G==e};return(0,b.jsxs)(d.Z,{children:[(0,b.jsx)(o.Z,{children:(0,b.jsxs)(l.Z,{sx:{m:1,p:2,backgroundImage:"linear-gradient(to bottom, #ECE9E6, #FFFFFF)"},children:[(0,b.jsx)(k,{}),(0,b.jsx)(x.Z,{sx:{my:1}}),(0,b.jsxs)(o.Z,{display:"flex",alignItems:"center",mb:1,children:[(0,b.jsx)(u.Z,{}),(0,b.jsx)(c.Z,{variant:"h6",sx:{ml:1,textDecoration:"underline"},children:"Search playlist"})]}),(0,b.jsxs)(o.Z,{my:1,children:[(0,b.jsx)(o.Z,{my:2,children:(0,b.jsxs)(h.Z,{activeStep:G,children:[(0,b.jsx)(Z.Z,{completed:H.loadCompletePlaylist,children:(0,b.jsx)(p.Z,{children:"Load a playlist"})}),(0,b.jsx)(Z.Z,{completed:H.searchResults,children:(0,b.jsx)(p.Z,{children:"Search lyrics"})}),(0,b.jsx)(Z.Z,{completed:!1,children:(0,b.jsx)(p.Z,{children:"Songs found"})})]})}),(0,b.jsxs)(o.Z,{children:[q(0)&&(0,b.jsx)(a.wP,{children:(0,b.jsx)(E,{playlistURL:S,setPlaylistURL:R,showSnackbar:g,setCompletePlaylistDetails:U})}),q(1)&&(0,b.jsx)(a.wP,{children:(0,b.jsxs)(i.Fragment,{children:[(0,b.jsx)(se,{completePlaylistDetails:I}),(0,b.jsx)(ee,{playlistURL:S,showSnackbar:g,setSearchResults:_,completePlaylistResponse:I})]})}),q(2)&&(0,b.jsx)(a.wP,{children:(0,b.jsxs)(i.Fragment,{children:[(0,b.jsx)(se,{completePlaylistDetails:I}),(0,b.jsx)(oe,{searchResults:T})]})})]})]}),G>0&&(0,b.jsxs)(i.Fragment,{children:[(0,b.jsx)(x.Z,{sx:{my:2}}),(0,b.jsx)(o.Z,{display:"flex",flexDirection:"row",children:(0,b.jsx)(j.Z,{color:"primary",onClick:function(){0!==G&&(1===G&&(z(0),O((0,s.Z)((0,s.Z)({},H),{},{loadCompletePlaylist:!1})),U({})),2===G&&(z(1),O((0,s.Z)((0,s.Z)({},H),{},{searchResults:!1})),_({})))},children:"Go back"})})]})]})}),(0,b.jsx)(f.Z,{open:n.open,autoHideDuration:6e3,onClose:v,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,b.jsx)(m.Z,{variant:"filled",onClose:v,severity:n.severity,children:n.message})})]})}}}]);
//# sourceMappingURL=786.00addb66.chunk.js.map